<html>

<html>
<head caption="${PRODUCT_SHORT_NAME} Extensions">
    <meta http-equiv="Content-Language" content="en-us">
    <link rel="stylesheet" type="text/css" href="style/default.css"/>
</head>

<body><content>

<p>This page contains information about JAXWS&nbsp; ${IMPL_VERSION}&nbsp; ${IMPL_VERSION_SUFFIX}&nbsp; 
specific features and extensions:</p>
<section title="Sending and Receiving SOAP Headers">
<p>At times you need a way to send and receive SOAP headers in your message - 
these headers may not be defined in the WSDL binding but your application needs 
to do it anyway. One approach has been to write a SOAPHandler to do it, but its 
more work and is expensive as SOAPHandlers work on SOAPMesssage which is DOM based and JAX-WS runtime would need to do conversion 
from its abstract Message representation to SOAPMessage and vice versa.</p>
<p>
There is a way to do it on the client side by downcasting the proxy to WSBindingProvider and use methods on it.
</p>

<section title="Sending SOAP Headers">
<p>You would downcasting the proxy to WSBindingProvider and set the Outbound headers.</p>

<blockquote>
<pre><code>
HelloService helloService = new HelloService();
HelloPort port = helloService.getHelloPort();
WSBindingProvider bp = (WSBindingProvider)port;

bp.setOutboundHeaders(
  // simple string value as a header, like <simpleHeader>stringValue</simpleHeader>
  Headers.create(new QName("simpleHeader"),"stringValue"),
  // create a header from JAXB object
  Headers.create(jaxbContext,myJaxbObject)
);
</code></pre>
</blockquote>
</section>
<section title="Receiving SOAP Headers">
<blockquote>
<pre><code>
List<Header> inboundHeaders = bp.getInboundHeaders();
</code></pre>
</blockquote>
</section>
</section>
<section title="Message logging">
<p>
Web Services developers generally need to see SOAP Messages that are transferred between client and service for debugging.  There are  
SOAP Monitors for this job, but you need modify the client or server code to use those tools. ${PRODUCT_SHORT_NAME} provides logging of SOAP messages
</p>
<section title="On the client">
 
Set system property <pre><b><code>com.sun.xml.ws.transport.http.client.HttpTransportPipe.dump=true</code></b></pre>
</section>
<section title="On the server side">
Set system property <pre><b><code>com.sun.xml.ws.transport.http.HttpAdapter.dump=true</code></b></pre>
</section>
</section>

<section title="Propagation of Server-side Stacktrace">
<p>
This is a very useful feature while developing Web Services. Often the soap fault messages does n't convey enough information about the problem. 
${PRODUCT_SHORT_NAME} relieves you from digging out the server logs to find out the stacktrace. Now the whole stacktrace (including nested exceptions) is propagated 
in the SOAP Fault and the complete exception stacktrace is visible to the client as cause of SOAPFaultException. 
</p>

<section title="Disabling propagation of Server-side stacktrace">
Propagation of Stack trace is on by default. If you think its not safe for your Web Service Application to send the complete stack trace, you can turn off 
this functionality by setting the system property  <pre><code><b>com.sun.xml.ws.fault.SOAPFaultBuilder.disableCaptureStackTrace=false</b></code></pre>.
</section>
</section>
</body>

</html>